Version 4
SHEET 1 1944 1028
WIRE 384 240 256 240
WIRE 560 240 448 240
WIRE 256 320 256 240
WIRE 384 320 256 320
WIRE 560 320 560 240
WIRE 560 320 448 320
WIRE 256 400 256 320
WIRE 384 400 256 400
WIRE 560 400 560 320
WIRE 560 400 464 400
WIRE 1200 416 1152 416
WIRE 1328 416 1280 416
WIRE -368 512 -480 512
WIRE -208 512 -368 512
WIRE -128 512 -208 512
WIRE 16 512 -128 512
WIRE 80 512 16 512
WIRE 256 512 256 400
WIRE 256 512 160 512
WIRE 384 512 256 512
WIRE -480 528 -480 512
WIRE -368 528 -368 512
WIRE -128 528 -128 512
WIRE 16 528 16 512
WIRE 560 528 560 400
WIRE 560 528 448 528
WIRE 640 528 560 528
WIRE 1152 528 1152 416
WIRE 1152 528 1136 528
WIRE 1184 528 1152 528
WIRE -208 544 -208 512
WIRE 1312 544 1248 544
WIRE 1328 544 1328 416
WIRE 1328 544 1312 544
WIRE 1184 560 1152 560
WIRE 1152 640 1152 560
WIRE 1152 640 1136 640
WIRE 1184 640 1152 640
WIRE 1184 752 1152 752
WIRE 1328 752 1328 544
WIRE 1328 752 1264 752
WIRE 1056 832 1056 640
WIRE 1152 848 1152 752
WIRE 1184 848 1152 848
WIRE 1328 848 1264 848
WIRE 1328 912 1328 848
WIRE 1152 960 1152 848
WIRE 1184 960 1152 960
WIRE 1328 976 1328 912
WIRE 1328 976 1248 976
WIRE 1056 992 1056 832
WIRE 1184 992 1056 992
FLAG 48 832 0
FLAG 48 752 vcc
FLAG 416 496 vcc
FLAG 416 560 0
FLAG -128 608 0
FLAG -208 608 0
FLAG -368 608 0
FLAG -480 608 0
FLAG 16 592 0
FLAG 176 832 0
FLAG 176 752 bias
FLAG 640 528 out
FLAG 208 576 0
FLAG 1216 512 vcc
FLAG 1216 576 0
FLAG 1216 944 vcc
FLAG 1216 1008 0
FLAG 1264 640 0
FLAG 1056 832 bias
FLAG 1312 544 outn
FLAG 1328 912 outp
FLAG 384 544 bias
SYMBOL OpAmps\\opamp2 416 464 R0
SYMATTR InstName U1
SYMATTR Value LMC6042
SYMBOL voltage 48 736 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL res 480 384 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL res 176 496 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value .1
SYMBOL current -368 608 R180
WINDOW 0 24 80 Left 2
WINDOW 3 -104 -54 Left 2
WINDOW 123 24 -28 Left 2
WINDOW 39 0 0 Left 0
SYMATTR InstName I1
SYMATTR Value SINE(2u 2u 1meg)
SYMATTR Value2 AC 1
SYMBOL diode -192 608 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL res -144 512 R0
SYMATTR InstName R3
SYMATTR Value 10Meg
SYMBOL current -480 608 R180
WINDOW 0 24 80 Left 2
WINDOW 3 24 0 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I2
SYMATTR Value 1.5n
SYMBOL cap 0 528 R0
SYMATTR InstName C1
SYMATTR Value .2p
SYMBOL voltage 176 736 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 2.5
SYMBOL cap 448 304 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 100n
SYMBOL OpAmps\\opamp2 1216 480 R0
SYMATTR InstName U2
SYMATTR Value LMC6042
SYMBOL res 1152 512 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL res 1296 400 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL res 1280 624 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 10k
SYMBOL res 1152 624 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL res 1280 736 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 10k
SYMBOL res 1280 832 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 10k
SYMBOL OpAmps\\opamp2 1216 912 R0
SYMATTR InstName U3
SYMATTR Value LMC6042
TEXT 264 40 Left 2 !.lib C:\\Users\\Anton\\git\\piezo_stage_controller\\sim\\snom187a\\old_models\\lmc6042.lib
TEXT -584 736 Left 2 !.tran 10u
TEXT -240 288 Left 2 !.meas TRAN peakpeak AVG V(outp)-V(outn)
TEXT 744 160 Left 2 ;use http://pe.org.pl/articles/2017/3/63.pdf to find better values so that a bias can be applied to input
