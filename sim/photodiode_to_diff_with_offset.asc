Version 4
SHEET 1 1944 1028
WIRE 384 320 256 320
WIRE 560 320 448 320
WIRE 256 400 256 320
WIRE 384 400 256 400
WIRE 560 400 560 320
WIRE 560 400 464 400
WIRE 1200 416 1152 416
WIRE 1328 416 1280 416
WIRE -208 512 -368 512
WIRE -16 512 -208 512
WIRE 80 512 -16 512
WIRE 128 512 80 512
WIRE 256 512 256 400
WIRE 256 512 208 512
WIRE 304 512 256 512
WIRE 384 512 304 512
WIRE -368 528 -368 512
WIRE 560 528 560 400
WIRE 560 528 448 528
WIRE 720 528 560 528
WIRE 832 528 800 528
WIRE 848 528 832 528
WIRE 1152 528 1152 416
WIRE 1152 528 848 528
WIRE 1184 528 1152 528
WIRE 1328 544 1328 416
WIRE 1328 544 1248 544
WIRE 1184 560 1152 560
WIRE 1152 640 1152 560
WIRE 1152 640 1136 640
WIRE 1184 640 1152 640
WIRE 1328 640 1328 544
WIRE 1456 640 1328 640
WIRE 1584 640 1536 640
WIRE 1056 656 1056 640
WIRE 1152 656 1152 640
WIRE 1152 656 1056 656
WIRE 1184 752 1152 752
WIRE 1328 752 1328 640
WIRE 1328 752 1264 752
WIRE 1584 752 1584 640
WIRE 1056 832 1056 656
WIRE 1152 848 1152 752
WIRE 1184 848 1152 848
WIRE 1328 848 1264 848
WIRE 1584 864 1584 832
WIRE 1328 912 1328 848
WIRE 1456 912 1328 912
WIRE 1584 912 1584 864
WIRE 1584 912 1536 912
WIRE 1152 960 1152 848
WIRE 1184 960 1152 960
WIRE 1328 976 1328 912
WIRE 1328 976 1248 976
WIRE 1056 992 1056 832
WIRE 1184 992 1056 992
FLAG 48 832 0
FLAG 48 752 vcc
FLAG 416 496 vcc
FLAG -368 608 0
FLAG 176 832 0
FLAG 176 752 bias
FLAG 832 528 out
FLAG 1216 512 vcc
FLAG 1216 576 0
FLAG 1216 944 vcc
FLAG 1216 1008 0
FLAG 1264 640 0
FLAG 1056 832 bias
FLAG 1584 640 outn
FLAG 1584 864 outp
FLAG -208 592 0
FLAG -16 576 0
FLAG 416 560 0
FLAG 384 544 bias
FLAG 848 592 0
FLAG 80 576 0
FLAG 304 576 0
SYMBOL OpAmps\\opamp2 416 464 R0
SYMATTR InstName U1
SYMATTR Value LMC6042
SYMBOL voltage 48 736 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL res 480 384 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value {Rf}
SYMBOL current -368 608 R180
WINDOW 0 24 80 Left 2
WINDOW 3 -104 -54 Left 2
WINDOW 123 24 -28 Left 2
WINDOW 39 0 0 Left 0
SYMATTR InstName I1
SYMATTR Value SINE(0 {0.01/Rf} 36k)
SYMATTR Value2 AC {.01/Rf}
SYMBOL voltage 176 736 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 2.5
SYMBOL OpAmps\\opamp2 1216 480 R0
SYMATTR InstName U2
SYMATTR Value LMC6042
SYMBOL OpAmps\\opamp2 1216 912 R0
SYMATTR InstName U3
SYMATTR Value LMC6042
SYMBOL res -224 496 R0
SYMATTR InstName R2
SYMATTR Value 10Meg
SYMBOL cap -32 512 R0
SYMATTR InstName C1
SYMATTR Value 1p
SYMBOL cap 448 304 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 10n
SYMBOL res 816 512 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 47k
SYMBOL res 1552 624 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 33
SYMBOL res 1552 896 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 33
SYMBOL res 1600 848 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R11
SYMATTR Value 20k
SYMBOL diode 96 576 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value 1N914
SYMBOL res 224 496 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 0
SYMBOL cap 832 528 R0
SYMATTR InstName C3
SYMATTR Value 10p
SYMBOL res 1296 400 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 47k
SYMBOL res 1280 736 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 47k
SYMBOL res 1280 832 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 47k
SYMBOL cap 288 512 R0
SYMATTR InstName C4
SYMATTR Value 2p
TEXT 264 40 Left 2 !.lib C:\\Users\\Anton\\git\\piezo_stage_controller\\sim\\snom187a\\old_models\\lmc6042.lib
TEXT -584 736 Left 2 !.tran 1m
TEXT -376 232 Left 2 !.meas TRAN dcoffset AVG V(outp)-V(outn)
TEXT 744 160 Left 2 ;use http://pe.org.pl/articles/2017/3/63.pdf to find better values so that a bias can be applied to input
TEXT -376 256 Left 2 !.meas TRAN peakpeak PP V(outp)-V(outn)
TEXT -392 312 Left 2 !.step dec param Rf 1k 1meg 1
